# ============================================================================
# Prometheus ServiceMonitors for All Microservices
# Enables Prometheus to scrape metrics from all services
# ============================================================================

---
# Event Ingestion Service
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: event-ingestion-service
  namespace: gamemetrics
  labels:
    app: event-ingestion-service
spec:
  selector:
    matchLabels:
      app: event-ingestion-service
  endpoints:
  - port: http
    path: /metrics
    interval: 30s
---
# Event Processor Service
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: event-processor-service
  namespace: gamemetrics
  labels:
    app: event-processor-service
spec:
  selector:
    matchLabels:
      app: event-processor-service
  endpoints:
  - port: http
    path: /metrics
    interval: 30s
---
# Recommendation Engine
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: recommendation-engine
  namespace: gamemetrics
  labels:
    app: recommendation-engine
spec:
  selector:
    matchLabels:
      app: recommendation-engine
  endpoints:
  - port: http
    path: /metrics
    interval: 30s
---
# Analytics API
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: analytics-api
  namespace: gamemetrics
  labels:
    app: analytics-api
spec:
  selector:
    matchLabels:
      app: analytics-api
  endpoints:
  - port: http
    path: /metrics
    interval: 30s
---
# User Service
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: user-service
  namespace: gamemetrics
  labels:
    app: user-service
spec:
  selector:
    matchLabels:
      app: user-service
  endpoints:
  - port: http
    path: /actuator/prometheus
    interval: 30s
---
# Notification Service
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: notification-service
  namespace: gamemetrics
  labels:
    app: notification-service
spec:
  selector:
    matchLabels:
      app: notification-service
  endpoints:
  - port: http
    path: /metrics
    interval: 30s
---
# Admin Dashboard
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: admin-dashboard
  namespace: gamemetrics
  labels:
    app: admin-dashboard
spec:
  selector:
    matchLabels:
      app: admin-dashboard
  endpoints:
  - port: http
    path: /metrics
    interval: 30s



