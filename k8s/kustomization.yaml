apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Namespaces (always first)
  - namespaces/namespaces.yml
  
  # ArgoCD is deployed separately via: kubectl apply -k k8s/argocd/base/
  # Uncomment below to include ArgoCD in the main deployment (not recommended)
  # - argocd/base
  
  # Secrets (Database, Redis, Kafka)
  - secrets
  
  # Strimzi Operator (Kafka operator)
  - strimzi/base
  
  # Kafka Cluster (KRaft mode)
  - kafka/overlays/dev
  
  # Kafka UI
  - kafka-ui
  
  # Application Services
  - services/event-ingestion

# Note: commonLabels can break existing deployments with immutable selectors
# Use commonAnnotations instead for metadata-only changes
commonAnnotations:
  deployed-by: kustomize
  environment: dev
