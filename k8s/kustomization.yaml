apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Namespaces (always first)
  - namespaces/namespaces.yml
  
  # ArgoCD with server resource limits and GitHub credentials (managed via kustomize)
  - argocd/overlays
  # ArgoCD Applications (apply separately or via individual files)
  - argocd/app-of-apps.yaml
  - argocd/application-kafka-dev.yaml
  - argocd/application-event-ingestion-dev.yaml
  
  # Secrets (Database, Redis, Kafka)
  - secrets
  
  # Strimzi Operator (Kafka operator)
  - strimzi/base
  
  # Kafka UI
  - kafka-ui
  
  # Observability Stack (Prometheus, Grafana, Loki)
  - observability
  
  # Application Services
  - services/event-ingestion

# Note: commonLabels can break existing deployments with immutable selectors
# Use commonAnnotations instead for metadata-only changes
commonAnnotations:
  deployed-by: kustomize
  environment: dev
