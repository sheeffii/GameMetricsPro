apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Namespaces (always first)
  - namespaces/namespaces.yml
  
  # ArgoCD with server resource limits and GitHub credentials (managed via kustomize)
  - argocd/overlays
  
  # Secrets (Database, Redis, Kafka)
  - secrets
  
  # Strimzi Operator (Kafka operator)
  - strimzi/base
  
  # Kafka Cluster (KRaft mode)
  - kafka/overlays/dev
  
  # Kafka UI
  - kafka-ui
  
  # Application Services
  - services/event-ingestion

# Note: commonLabels can break existing deployments with immutable selectors
# Use commonAnnotations instead for metadata-only changes
commonAnnotations:
  deployed-by: kustomize
  environment: dev
